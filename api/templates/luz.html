<!DOCTYPE html>
<html lang="pt">
	<head>
		<meta charset="UTF-8" />
		<title>Valores da Luz</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				margin: 20px;
			}
			table {
				border-collapse: collapse;
				width: 60%;
				margin-bottom: 20px;
			}
			th,
			td {
				border: 1px solid #333;
				padding: 8px;
				text-align: center;
			}
			th {
				background-color: #eee;
			}
			button {
				padding: 10px 20px;
				font-size: 16px;
				cursor: pointer;
				margin: 5px;
			}
			form {
				margin-top: 20px;
			}
			#mensagem {
				margin-top: 10px;
				color: green;
			}
		</style>
	</head>
	<body>
		<h2>Valores de Luz</h2>

		<table>
			<tr>
				<th>Valor</th>
				<th>Timestamp</th>
			</tr>
			{% for valor, ts in valores %}
			<tr>
				<td>{{ valor }}</td>
				<td>{{ ts.strftime("%Y-%m-%d %H:%M:%S") }}</td>
			</tr>
			{% endfor %}
		</table>

		<h3>Controlo do LED</h3>
		<button onclick="controlarLED(1)">Ligar LED</button>
		<button onclick="controlarLED(2)">Desligar LED</button>
		<button onclick="controlarLED(0)">Modo Autom√°tico</button>

		<script>
			function controlarLED(estado) {
				fetch("/led", {
					method: "POST",
					body: JSON.stringify({ estado: estado }),
				})
					.then((response) => response.json())
					.then((data) => {
						alert(data.message);
					})
					.catch((error) => {
						alert("Erro!", error);
					});
			}
		</script>
	</body>
</html>